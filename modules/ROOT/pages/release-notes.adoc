= SG release notes

== 1.3.1 release

.Enhancements
* https://github.com/couchbase/sync_gateway/issues/1745[#1745] Add retry when trying to connect to a server node in "warmup" state
* https://github.com/couchbase/sync_gateway/issues/2005[#2005] Tombstones don't grant access, don't propagate to users granted access by the doc
* https://github.com/couchbase/sync_gateway/issues/2013[#2013] Azure returns unsigned ID token in response to refresh request
* https://github.com/couchbase/sync_gateway/issues/2038[#2038] Uptake expvar refactoring for perf usage into 1.3.1
* https://github.com/couchbase/sync_gateway/issues/2046[#2046] Service install script enhancement for Ubuntu 16.04

.Bugs
* https://github.com/couchbase/sync_gateway/issues/973[#973] Can't initiate websocket connection
* https://github.com/couchbase/sync_gateway/issues/1554[#1554] Panic: send on closed channel when closing database
* https://github.com/couchbase/sync_gateway/issues/1999[#1999] Sync Gateway terminating changes requests

== 1.3 release

.Performance Improvements
* https://github.com/couchbase/sync_gateway/issues/1631[#1631] Disable assimilator when autoImport=false and shadower=nil
* https://github.com/couchbase/sync_gateway/issues/1752[#1752] Major inefficiencies replicating docs with many revisions

.Enhancements
* https://github.com/couchbase/sync_gateway/issues/508[#508] Feature Request: Oauth2 Support
* https://github.com/couchbase/sync_gateway/issues/656[#656] Special characters in channel names cause error
* https://github.com/couchbase/sync_gateway/issues/1326[#1326] Map URI's without a trailing slash to the same handlers as the trailing backslash routes
* https://github.com/couchbase/sync_gateway/issues/1331[#1331] Create and distribute a diagnostics tool
* https://github.com/couchbase/sync_gateway/issues/1623[#1623] POST to _changes is incompatible with CouchDB's implementation
* https://github.com/couchbase/sync_gateway/issues/1634[#1634] Querying a view via the Public REST API returns total row count
* https://github.com/couchbase/sync_gateway/issues/1663[#1663] Add `\_replicate` support to SG admin REST API
* https://github.com/couchbase/sync_gateway/issues/1680[#1680] SGW +/{db}/{doc}+?revs_info=true doesn't show revision info
* https://github.com/couchbase/sync_gateway/issues/1683[#1683] Allow forward slashes in attachment names
* https://github.com/couchbase/sync_gateway/issues/1685[#1685] Misleading error message when trying to add attachment to unavailable document
* https://github.com/couchbase/sync_gateway/issues/1686[#1686] New logging REST API endpoint
* https://github.com/couchbase/sync_gateway/issues/1688[#1688] Implement OpenID Connect relying-party support
* https://github.com/couchbase/sync_gateway/issues/1710[#1710] Ability for Sync Gateway to bring itself back online after unexpected offline
* https://github.com/couchbase/sync_gateway/issues/1774[#1774] Functional tests for OIDC authentication
* https://github.com/couchbase/sync_gateway/issues/1926[#1926] Handle invalid username characters in OIDC issuer, subject

.Bugs
* https://github.com/couchbase/sync_gateway/issues/1024[#1024] Sync Gateway not reporting changes
* https://github.com/couchbase/sync_gateway/issues/1034[#1034] SyncGateway not looking up the ancestry to find an attachment
* https://github.com/couchbase/sync_gateway/issues/1051[#1051] Couchbase Server indexing stuck on SG views
* https://github.com/couchbase/sync_gateway/issues/1286[#1286] Removing a node from CB-cluster and rebalance causing writer SG to crash
* https://github.com/couchbase/sync_gateway/issues/1308[#1308] [Distributed Index] User not getting docs in _changes when given access via sync function
* https://github.com/couchbase/sync_gateway/issues/1384[#1384] Changes feed returning duplicates for * channel
* https://github.com/couchbase/sync_gateway/issues/1388[#1388] [Distributed Index] Panic when restarting sync_gateway
* https://github.com/couchbase/sync_gateway/issues/1471[#1471] [Distributed Index] Panic when shutting down sg_accel while it is indexing
* https://github.com/couchbase/sync_gateway/issues/1575[#1575] New warning happening on SG 1.2: "MultiChangesFeed: Terminator missing for Continuous/Wait mode"
* https://github.com/couchbase/sync_gateway/issues/1631[#1631] Disable assimilator when autoImport=false and shadower=nil
* https://github.com/couchbase/sync_gateway/issues/1656[#1656] Users can be created with empty password even though `allow_empty_password` is `False`
* https://github.com/couchbase/sync_gateway/issues/1691[#1691] Latest gocb breaks go get
* https://github.com/couchbase/sync_gateway/issues/1702[#1702] _changes with doc_ids filter does not return deleted docs
* https://github.com/couchbase/sync_gateway/issues/1706[#1706] Attachments fail to sync if revpos ancestor on server has been compacted
* https://github.com/couchbase/sync_gateway/issues/1712[#1712] Return an error for unsupported changes filter
* https://github.com/couchbase/sync_gateway/issues/1728[#1728] Attachments still stored for documents rejected by sync function
* https://github.com/couchbase/sync_gateway/issues/1736[#1736] Intermittent unit test failure - TestPostChangesChannelFilterClock
* https://github.com/couchbase/sync_gateway/issues/1751[#1751] SG master doesn't compile on i386
* https://github.com/couchbase/sync_gateway/issues/1760[#1760] Compiling for i386 fails in `pruneRevisions`
* https://github.com/couchbase/sync_gateway/issues/1769[#1769] Filter by channel works with arrays only
* https://github.com/couchbase/sync_gateway/issues/1857[#1857] Changes feed with doc_ids filter omits `deleted` properties

.Known Issues
* https://github.com/couchbase/sync_gateway/issues/1979[#1979] OIDC - Azure AD must be default provider when using multiple providers